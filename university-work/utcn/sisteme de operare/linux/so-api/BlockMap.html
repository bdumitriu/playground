<HTML>
<HEAD>
<TITLE>class BlockMap</TITLE>

<META NAME="Generator" CONTENT="KDOC ">
</HEAD>
<BODY bgcolor="#ffffff" text="#000000" link="#0000ff" vlink="#000099" alink= "#ffffff">
<TABLE WIDTH="100%" BORDER="0">
<TR>
<TD>
	<TABLE BORDER="0">
		<TR><TD valign="top" align="left" cellspacing="10">
		<h1>class BlockMap</h1>
		</TD>
		<TD valign="top" align="right" colspan="1">
                                                                         *
   This program is free software; you can redistribute it and/or modify  *
   it under the terms of the GNU General Public License as published by  *
   the Free Software Foundation; either version 2 of the License, or     *
   (at your option) any later version. <small><A HREF="#longdesc">More...</A></small></TD></TR>
	</TABLE>
	<HR>
	<TABLE BORDER="0">
		<TR><TH>Definition</TH><TD><code>#include &lt;<A HREF="so___include___driver___BlockMap_h.html">so/include/driver/BlockMap.h</A>&gt;</code></TD></TR>
<TR><TH><A HREF="full-list-BlockMap.html">List of all Methods</A></TH></TR>
	</TABLE>
	</TD>
<TD align="right"><TABLE BORDER="0"><TR><TD><small><A HREF="index-long.html">Annotated List</A></small></TD></TR>
<TR><TD><small><A HREF="header-list.html">Files</A></small></TD></TR>
<TR><TD><small><A HREF="all-globals.html">Globals</A></small></TD></TR>
<TR><TD><small><A HREF="hier.html">Hierarchy</A></small></TD></TR>
<TR><TD><small><A HREF="index.html">Index</A></small></TD></TR>
</TABLE></TD></TR></TABLE>
<h4>Public Methods</h4><ul><LI>&nbsp;<b><A HREF="#ref1">BlockMap</A></b> (<A HREF="HDD.html">HDD</A>* hdd) 
</LI>
<LI>&nbsp;<b><A HREF="#ref2">~BlockMap</A></b> () 
</LI>
<LI>unsigned char* &nbsp;<b><A HREF="#ref3">getChecksum</A></b> () 
</LI>
<LI>unsigned long &nbsp;<b><A HREF="#ref4">getNrOfBlocks</A></b> () 
</LI>
<LI>void &nbsp;<b><A HREF="#ref5">setChecksum</A></b> (unsigned char* checksum) 
</LI>
<LI>void &nbsp;<b><A HREF="#ref6">setNrOfBlocks</A></b> (unsigned long nrOfBlocks) 
</LI>
<LI>bool &nbsp;<b><A HREF="#ref7">isFree</A></b> (unsigned long index) 
</LI>
<LI>void &nbsp;<b><A HREF="#ref8">allocBlock</A></b> (unsigned long index) 
</LI>
<LI>void &nbsp;<b><A HREF="#ref9">allocBlocks</A></b> (unsigned long* blocks, unsigned long nr) 
</LI>
<LI>void &nbsp;<b><A HREF="#ref10">freeBlock</A></b> (unsigned long index) 
</LI>
<LI>unsigned long &nbsp;<b><A HREF="#ref11">getFreeBlock</A></b> () 
</LI>
<LI>unsigned long &nbsp;<b><A HREF="#ref12">getFreeBlocks</A></b> (unsigned long* freeBlocks, unsigned long nr) 
</LI>
</ul><h4>Private Members</h4><ul><LI>HDD* <b><A HREF="#ref13">hdd</A></b></LI>
<LI>FileInputStream* <b><A HREF="#ref14">fis</A></b></LI>
<LI>FileOutputStream* <b><A HREF="#ref15">fos</A></b></LI>
<LI>Inode* <b><A HREF="#ref16">fbInode</A></b></LI>
</ul><HR><H2><A NAME="longdesc">Detailed Description</A></H2><p>
                                                                         *
   This program is free software; you can redistribute it and/or modify  *
   it under the terms of the GNU General Public License as published by  *
   the Free Software Foundation; either version 2 of the License, or     *
   (at your option) any later version.                                   *
                                                                         *
*************************************************************************</p>
<A NAME="BlockMap"></A><A NAME="ref1"></A><table width="100%"><tr bgcolor="#eeeeee"><td>&nbsp;<strong>BlockMap</strong> (<A HREF="HDD.html">HDD</A>* hdd)
<br></td><td align="right"><h3><strong>BlockMap</strong></h3></td></tr></table><p></p><p>
 Creates a new BlockMap. <code>hdd</code> will be used to perform
 read/write operations when the class' methods are called.
</p>
<p></p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>hdd</i></TD><TD align="left" valign="top">the hard disk which will be used for read/write operations.
	 </TD></TR>
</TABLE></P>
<A NAME="~BlockMap"></A><A NAME="ref2"></A><table width="100%"><tr bgcolor="#eeeeee"><td>&nbsp;<strong>~BlockMap</strong> ()
<br></td><td align="right"><h3><strong>~BlockMap</strong></h3></td></tr></table><p></p><p>
 The destructor of the class. This destructor does not free
 the <code>hdd</code>.
	 </p>
<A NAME="getChecksum"></A><A NAME="ref3"></A><table width="100%"><tr bgcolor="#eeeeee"><td>unsigned char* &nbsp;<strong>getChecksum</strong> ()
<br>throw(<A HREF="HardDiskNotInitializedException.html">HardDiskNotInitializedException</A>*, <A HREF="IOException.html">IOException</A>*, <A HREF="InvalidBlockNumberException.html">InvalidBlockNumberException</A>*)</td><td align="right"><h3><strong>getChecksum</strong></h3></td></tr></table><p></p><p>
 Returns the value of the blocks bitmap file's checksum.
</p>
<p> The method throws:
 <ul>
 <li> HardDiskNotInitializedException* forwarded from <code>hdd</code>.</li>
 <li> IOException* forwarded from <code>hdd</code>.</li>
 <li> InvalidBlockNumberException* forwarded from <code>hdd</code>.</li>
 </ul>
</p>
<p></p>
<p><b>Returns</b>: the value of the blocks bitmap file's checksum.
	 </p>
<A NAME="getNrOfBlocks"></A><A NAME="ref4"></A><table width="100%"><tr bgcolor="#eeeeee"><td>unsigned long &nbsp;<strong>getNrOfBlocks</strong> ()
<br>throw(<A HREF="HardDiskNotInitializedException.html">HardDiskNotInitializedException</A>*, <A HREF="IOException.html">IOException</A>*, <A HREF="InvalidBlockNumberException.html">InvalidBlockNumberException</A>*)</td><td align="right"><h3><strong>getNrOfBlocks</strong></h3></td></tr></table><p></p><p>
 Returns the value of the blocks bitmap file's number of non system blocks.
</p>
<p> The method throws:
 <ul>
 <li> HardDiskNotInitializedException* forwarded from <code>hdd</code>.</li>
 <li> IOException* forwarded from <code>hdd</code>.</li>
 <li> InvalidBlockNumberException* forwarded from <code>hdd</code>.</li>
 </ul>
</p>
<p></p>
<p><b>Returns</b>: the value of the blocks bitmap file's number of non system blocks.
	 </p>
<A NAME="setChecksum"></A><A NAME="ref5"></A><table width="100%"><tr bgcolor="#eeeeee"><td>void &nbsp;<strong>setChecksum</strong> (unsigned char* checksum)
<br>throw(<A HREF="HardDiskNotInitializedException.html">HardDiskNotInitializedException</A>*, <A HREF="IOException.html">IOException</A>*, <A HREF="InvalidBlockNumberException.html">InvalidBlockNumberException</A>*)</td><td align="right"><h3><strong>setChecksum</strong></h3></td></tr></table><p></p><p>
 Changes the value of the blocks bitmap file's checksum to
 <code>checksum</code>.
</p>
<p> The method throws:
 <ul>
 <li> HardDiskNotInitializedException* forwarded from <code>hdd</code>.</li>
 <li> IOException* forwarded from <code>hdd</code>.</li>
 <li> InvalidBlockNumberException* forwarded from <code>hdd</code>.</li>
 </ul>
</p>
<p></p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>checksum</i></TD><TD align="left" valign="top">the new value of the checksum.
	 </TD></TR>
</TABLE></P>
<A NAME="setNrOfBlocks"></A><A NAME="ref6"></A><table width="100%"><tr bgcolor="#eeeeee"><td>void &nbsp;<strong>setNrOfBlocks</strong> (unsigned long nrOfBlocks)
<br>throw(<A HREF="HardDiskNotInitializedException.html">HardDiskNotInitializedException</A>*, <A HREF="IOException.html">IOException</A>*, <A HREF="InvalidBlockNumberException.html">InvalidBlockNumberException</A>*)</td><td align="right"><h3><strong>setNrOfBlocks</strong></h3></td></tr></table><p></p><p>
 Changes the value of the blocks bitmap file's number of non
 system blocks to <code>nrOfBlocks</code>.
</p>
<p> The method throws:
 <ul>
 <li> HardDiskNotInitializedException* forwarded from <code>hdd</code>.</li>
 <li> IOException* forwarded from <code>hdd</code>.</li>
 <li> InvalidBlockNumberException* forwarded from <code>hdd</code>.</li>
 </ul>
</p>
<p></p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>nrOfBlocks</i></TD><TD align="left" valign="top">the new value of the number of non system blocks.
	 </TD></TR>
</TABLE></P>
<A NAME="isFree"></A><A NAME="ref7"></A><table width="100%"><tr bgcolor="#eeeeee"><td>bool &nbsp;<strong>isFree</strong> (unsigned long index)
<br>throw(
		<A HREF="ArrayIndexOutOfBoundsException.html">ArrayIndexOutOfBoundsException</A>*,
		<A HREF="HardDiskNotInitializedException.html">HardDiskNotInitializedException</A>*,
		<A HREF="IOException.html">IOException</A>*,
		<A HREF="InvalidBlockNumberException.html">InvalidBlockNumberException</A>*)</td><td align="right"><h3><strong>isFree</strong></h3></td></tr></table><p></p><p>
 Returns true if the <code>index</code>th bit of the bitmap
 is 0 and false if it is 1.
</p>
<p> The method throws:
 <ul>
 <li> ArrayIndexOutOfBoundsException* if index is less than 0 (which
 is rather hard since it's an unsigned long) or greater than or
 equal to NR_OF_BLOCKS-FILEATTR_AREA_START_ADDR-MAX_NO_FILEATTR.</li>
 <li> HardDiskNotInitializedException* forwarded from <code>hdd</code>.</li>
 <li> IOException* forwarded from <code>hdd</code>.</li>
 <li> InvalidBlockNumberException* forwarded from <code>hdd</code>.</li>
 </ul>
</p>
<p></p>
<p><b>Returns</b>: true if the <code>index</code>th bit is 0 and false
 if it is 1.
	 </p>
<A NAME="allocBlock"></A><A NAME="ref8"></A><table width="100%"><tr bgcolor="#eeeeee"><td>void &nbsp;<strong>allocBlock</strong> (unsigned long index)
<br>throw(
		<A HREF="ArrayIndexOutOfBoundsException.html">ArrayIndexOutOfBoundsException</A>*,
		<A HREF="HardDiskNotInitializedException.html">HardDiskNotInitializedException</A>*,
		<A HREF="IOException.html">IOException</A>*,
		<A HREF="InvalidBlockNumberException.html">InvalidBlockNumberException</A>*)</td><td align="right"><h3><strong>allocBlock</strong></h3></td></tr></table><p></p><p>
 Sets the <code>index</code>th bit of the bitmap to 1.
</p>
<p> The method doesn't make any checks too see if the block isn't
 already allocated. You should make sure of that yourself.
</p>
<p> The method throws:
 <ul>
 <li> ArrayIndexOutOfBoundsException* if index is less than 0 (which
 is rather hard since it's an unsigned long) or greater than or
 equal to 8*include/defs.h::NR_OF_BLOCKS-FILEATTR_AREA_START_ADDR-MAX_NO_FILEATTR.</li>
 <li> HardDiskNotInitializedException* forwarded from <code>hdd</code>.</li>
 <li> IOException* forwarded from <code>hdd</code>.</li>
 <li> InvalidBlockNumberException* forwarded from <code>hdd</code>.</li>
 </ul>
	 </p>
<A NAME="allocBlocks"></A><A NAME="ref9"></A><table width="100%"><tr bgcolor="#eeeeee"><td>void &nbsp;<strong>allocBlocks</strong> (unsigned long* blocks, unsigned long nr)
<br>throw(
		<A HREF="ArrayIndexOutOfBoundsException.html">ArrayIndexOutOfBoundsException</A>*,
		<A HREF="HardDiskNotInitializedException.html">HardDiskNotInitializedException</A>*,
		<A HREF="IOException.html">IOException</A>*,
		<A HREF="InvalidBlockNumberException.html">InvalidBlockNumberException</A>*)</td><td align="right"><h3><strong>allocBlocks</strong></h3></td></tr></table><p></p><p>
 Allocates each of the blocks in the <code>blocks</code> array by
 setting its corresponding bit to 1. <code>nr</code> represents the
 number of blocks to allocated. Therefore, blocks should contain at
 least <code>nr</code> valid entries.
</p>
<p> The method doesn't make any checks too see if the blocks aren't
 already allocated. You should make sure of that yourself.
</p>
<p> The method throws:
 <ul>
 <li> ArrayIndexOutOfBoundsException* if any of the blocks is less
 than 0 (which is rather hard since they're unsigned longs) or greater
 than or equal to 8*include/defs.h::NR_OF_BLOCKS-FILEATTR_AREA_START_ADDR-MAX_NO_FILEATTR.</li>
 <li> HardDiskNotInitializedException* forwarded from <code>hdd</code>.</li>
 <li> IOException* forwarded from <code>hdd</code>.</li>
 <li> InvalidBlockNumberException* forwarded from <code>hdd</code>.</li>
 </ul>
	 </p>
<A NAME="freeBlock"></A><A NAME="ref10"></A><table width="100%"><tr bgcolor="#eeeeee"><td>void &nbsp;<strong>freeBlock</strong> (unsigned long index)
<br>throw(
		<A HREF="ArrayIndexOutOfBoundsException.html">ArrayIndexOutOfBoundsException</A>*,
		<A HREF="HardDiskNotInitializedException.html">HardDiskNotInitializedException</A>*,
		<A HREF="IOException.html">IOException</A>*,
		<A HREF="InvalidBlockNumberException.html">InvalidBlockNumberException</A>*)</td><td align="right"><h3><strong>freeBlock</strong></h3></td></tr></table><p></p><p>
 Sets the <code>index</code>th bit of the bitmap to 0.
</p>
<p> The method throws:
 <ul>
 <li> ArrayIndexOutOfBoundsException* if index is less than 0 (which
 is rather hard since it's an unsigned long) or greater than or
 equal to 8*include/defs.h::NR_OF_BLOCKS-FILEATTR_AREA_START_ADDR-MAX_NO_FILEATTR.</li>
 <li> HardDiskNotInitializedException* forwarded from <code>hdd</code>.</li>
 <li> IOException* forwarded from <code>hdd</code>.</li>
 <li> InvalidBlockNumberException* forwarded from <code>hdd</code>.</li>
 </ul>
	 </p>
<A NAME="getFreeBlock"></A><A NAME="ref11"></A><table width="100%"><tr bgcolor="#eeeeee"><td>unsigned long &nbsp;<strong>getFreeBlock</strong> ()
<br>throw(<A HREF="HardDiskNotInitializedException.html">HardDiskNotInitializedException</A>*, <A HREF="IOException.html">IOException</A>*, <A HREF="InvalidBlockNumberException.html">InvalidBlockNumberException</A>*)</td><td align="right"><h3><strong>getFreeBlock</strong></h3></td></tr></table><p></p><p>
 Returns the index of a free bitmap position (i.e. one whose value
 is 0). This method takes the nr. of non system blocks into account,
 meaning it only searches for a free bit up to (this number-1)th bit.
 If no free positions exist, the method returns the same value
 getNrOfBlocks() would return => you can check if you still have free
 bytes or not by comparing the return value received with the return
 value of getNrOfBlocks(). If they are identical, it means the hard
 disk is full (i.e. no more free non system blocks are available).
</p>
<p> The method throws:
 <ul>
 <li> HardDiskNotInitializedException* forwarded from <code>hdd</code>.</li>
 <li> IOException* forwarded from <code>hdd</code>.</li>
 <li> InvalidBlockNumberException* forwarded from <code>hdd</code>.</li>
 </ul>
</p>
<p></p>
<p><b>Returns</b>: the index of a free bitmap position (i.e. one whose value is 0).
	 </p>
<A NAME="getFreeBlocks"></A><A NAME="ref12"></A><table width="100%"><tr bgcolor="#eeeeee"><td>unsigned long &nbsp;<strong>getFreeBlocks</strong> (unsigned long* freeBlocks, unsigned long nr)
<br>throw(<A HREF="HardDiskNotInitializedException.html">HardDiskNotInitializedException</A>*, <A HREF="IOException.html">IOException</A>*, <A HREF="InvalidBlockNumberException.html">InvalidBlockNumberException</A>*)</td><td align="right"><h3><strong>getFreeBlocks</strong></h3></td></tr></table><p></p><p>
 Searches for a number of <code>nr</code> free blocks and writes their
 addresses in the <code>freeBlocks</code> array. Therefore, <code>freeBlocks</code>
 should have enough space to store at least a number of <code>nr</code>
 unsigned longs. This method takes the nr. of non system blocks into account,
 meaning it only searches for free bits up to (this number-1)th bit. The
 method returns the number of free blocks found. This means that the first
 that many entries in freeBlocks are addresses of actual free blocks.
</p>
<p> The method throws:
 <ul>
 <li> HardDiskNotInitializedException* forwarded from <code>hdd</code>.</li>
 <li> IOException* forwarded from <code>hdd</code>.</li>
 <li> InvalidBlockNumberException* forwarded from <code>hdd</code>.</li>
 </ul>
</p>
<p></p>
<p><b>Returns</b>: the the number of free blocks found.
	 </p>
<A NAME="hdd"></A><A NAME="ref13"></A><table width="100%"><tr bgcolor="#eeeeee"><td><A HREF="HDD.html">HDD</A>*  <strong>hdd</strong>
</td><td align="right"><h3><strong>hdd</strong></h3></td></tr></table><p> <small>[private]</small></p><A NAME="fis"></A><A NAME="ref14"></A><table width="100%"><tr bgcolor="#eeeeee"><td><A HREF="FileInputStream.html">FileInputStream</A>*  <strong>fis</strong>
</td><td align="right"><h3><strong>fis</strong></h3></td></tr></table><p> <small>[private]</small></p><A NAME="fos"></A><A NAME="ref15"></A><table width="100%"><tr bgcolor="#eeeeee"><td><A HREF="FileOutputStream.html">FileOutputStream</A>*  <strong>fos</strong>
</td><td align="right"><h3><strong>fos</strong></h3></td></tr></table><p> <small>[private]</small></p><A NAME="fbInode"></A><A NAME="ref16"></A><table width="100%"><tr bgcolor="#eeeeee"><td><A HREF="Inode.html">Inode</A>*  <strong>fbInode</strong>
</td><td align="right"><h3><strong>fbInode</strong></h3></td></tr></table><p> <small>[private]</small></p><HR>
	<table>
	<tr><td><small>Generated by: bdumitriu on whitewizard on Tue Nov 12 22:08:44 2002, using kdoc 2.0a54.</small></td></tr>
	</table>
</BODY>
</HTML>
